<div class="w-full flex flex-col items-center mt-10 mb-10 px-5">
  <div class="flex justify-between w-full items-center mb-6">
    <div class="flex flex-col gap-4">
      <h1 class="text-5xl">Your Cart</h1>
      <% if @current_cart.cart_items.any? %>
        <p class="text-lg">You have <%= @total_quantity %> items in your cart</p>
      <% else %>
        <p class="text-lg">You don't have any items in your cart yet</p>
      <% end %>
    </div>
    <%= link_to "Checkout Now", checkout_cart_path(@current_cart.cart_id), class: "rounded-lg font-semibold p-4 text-center text-xl bg-yellow-400 hover:bg-yellow-500" %>
  </div>

  <% if @current_cart.cart_items.any? %>
    <table class="min-w-full bg-white rounded-lg shadow-md">
      <thead class="bg-gray-100">
        <tr>
          <th class="text-left py-3 px-4 font-semibold text-sm">Product</th>
          <th class="text-left py-3 px-4 font-semibold text-sm">Price</th>
          <th class="text-left py-3 px-4 font-semibold text-sm">Quantity</th>
          <th class="text-left py-3 px-4 font-semibold text-sm">Actions</th>
        </tr>
      </thead>
      <tbody>
        <% @current_cart.cart_items.each do |cart_item| %>
          <tr class="border-b">
            <td class="py-3 px-4 text-sm">
              <%= cart_item.product.name %>
            </td>
            <td class="py-3 px-4 text-sm">
              <%= number_to_currency(cart_item.product.price) %>
            </td>
            <td class="py-3 px-4 text-sm">
              <%= form_with model: cart_item, url: cart_path(cart_item), method: :patch, local: true do |form| %>
                <div class="flex items-center">
                  <%= form.number_field :quantity, value: cart_item.quantity, min: 1, class: "rounded-lg font-semibold p-2 text-center text-xl bg-gray-200 w-20" %>
                  <%= form.submit "Update", class: "ml-2 rounded-lg font-semibold p-2 text-center text-sm bg-blue-400 hover:bg-blue-500" %>
                </div>
              <% end %>
            </td>
            <td class="py-3 px-4 text-sm">
              <%= link_to "Remove", cart_path(@current_cart.cart_id, product_id: cart_item.product.id), class: "p-2 rounded-lg bg-red-500 text-white",
                  data: { turbo_method: "delete" } %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% end %>
</div>
